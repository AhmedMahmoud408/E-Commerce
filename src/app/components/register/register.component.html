<section>
    <div class="  w-75 my-5 mx-auto">
        <div class="border border-1 rounded-2 shadow border-secondary-subtle">
            <h1 class="h2 p-2 text-main">Create account</h1>
            <form [formGroup]="registerForm" (ngSubmit)="registerSubmit()">
                <div class="my-2 mx-3">
                    <label for="name" class="fs-6 fw-medium">Name:</label>
                    <input [ngClass]="{'is-valid':!registerForm.get('name')?.errors  &&(registerForm.get('name')?.touched||registerForm.get('name')?.dirty),
                    'is-invalid':registerForm.get('name')?.errors  &&(registerForm.get('name')?.touched||registerForm.get('name')?.dirty)

                    }"
                    id="name" type="text" class="form-control" formControlName="name">
                    @if (registerForm.get('name')?.errors  &&(registerForm.get('name')?.touched||registerForm.get('name')?.dirty)) {
                        <div class=" alert alert-danger alert-w my-2  mx-2">
                            @if (registerForm.get('name')?.getError('required')) {
                                <p class="m-0">Required</p>
                            }
                            @else if (registerForm.get('name')?.getError('minlength')) {
                                <p class="m-0">Name Should be more than or equal  3 chars</p>
                            }
                            @else if (registerForm.get('name')?.getError('maxlength')) {
                                <p class="m-0">Name Should be less than or equal  20 chars</p>
                            }

                        </div>
                    }
                </div>
                <div class="my-2 mx-3">
                    <label for="email" class="fs-6 fw-medium ">Email:</label>
                    <input [ngClass]="{
                        'is-valid':!registerForm.get('email')?.errors  &&(registerForm.get('email')?.touched||registerForm.get('email')?.dirty),
                        'is-invalid':registerForm.get('email')?.errors  &&(registerForm.get('email')?.touched||registerForm.get('email')?.dirty)
                    }" id="email" type="email" class="form-control" formControlName="email">
                    @if (registerForm.get('email')?.errors  &&(registerForm.get('email')?.touched||registerForm.get('email')?.dirty)) {
                        <div class=" alert alert-danger alert-w my-2  mx-2">
                            @if (registerForm.get('email')?.getError('required')) {
                                <p class="m-0">Required</p>
                            }
                            @else if (registerForm.get('email')?.getError('email')) {
                                <p class="m-0">Enter Valid Email </p>
                            }
                        </div>
                    }
                </div>
                <div class="my-2 mx-3">
                    <label for="password" class="fs-6 fw-medium ">Password:</label>
                    <input [ngClass]="{
                        'is-valid':!registerForm.get('password')?.errors  &&(registerForm.get('password')?.touched||registerForm.get('password')?.dirty),
                        'is-invalid':registerForm.get('password')?.errors  &&(registerForm.get('password')?.touched||registerForm.get('password')?.dirty)
                    }" id="password" type="password" class="form-control" formControlName="password">
                    @if (registerForm.get('password')?.errors  &&(registerForm.get('password')?.touched||registerForm.get('password')?.dirty)) {
                        <div class=" alert alert-danger alert-w my-2  mx-2">
                            @if (registerForm.get('password')?.getError('required')) {
                                <p class="m-0">Required</p>
                            }
                            @else if (registerForm.get('password')?.getError('pattern')) {
                                <p class="m-0">Minimum sex characters, at least one upper case English letter, one lower case English letter, one number and one special character </p>
                            }
                        </div>
                    }
                </div>
                <div class="my-2 mx-3">
                    <label for="rePassword" class="fs-6 fw-medium ">Re-password:</label>
                    <input [ngClass]="{
                        'is-valid':!registerForm.getError('mismatch') &&(registerForm.get('rePassword')?.touched||registerForm.get('rePassword')?.dirty),
                        'is-invalid':registerForm.getError('mismatch') &&(registerForm.get('rePassword')?.touched||registerForm.get('rePassword')?.dirty)
                    }" id="rePassword" type="password" class="form-control" formControlName="rePassword">
                    @if (registerForm.getError('mismatch') &&(registerForm.get('rePassword')?.touched||registerForm.get('rePassword')?.dirty)) {
                        <div class=" alert alert-danger alert-w my-2  mx-2">
                                <p class="m-0">Password confirmation is incorrect</p>
                        </div>
                    }
                </div>
                <div class="my-2 mx-3">
                    <label for="phone" class="fs-6 fw-medium">Phone:</label>
                    <input [ngClass]="{
                        'is-valid':!registerForm.get('phone')?.errors  &&(registerForm.get('phone')?.touched||registerForm.get('phone')?.dirty),
                        'is-invalid':registerForm.get('phone')?.errors  &&(registerForm.get('phone')?.touched||registerForm.get('phone')?.dirty)
                    }" id="phone" type="tel" class="form-control" formControlName="phone">
                    @if (registerForm.get('phone')?.errors  &&(registerForm.get('phone')?.touched||registerForm.get('phone')?.dirty)) {
                        <div class=" alert alert-danger alert-w my-2  mx-2">
                            @if (registerForm.get('phone')?.getError('required')) {
                                <p class="m-0">Required</p>
                            }
                            @else if (registerForm.get('phone')?.getError('pattern')) {
                                <p class="m-0">accept only egypt phone numbers </p>
                            }
                        </div>
                    }
                </div>
                @if (msgEroo) {
                    <p class="alert alert-danger alert-w my-2  mx-2"> {{msgEroo}}</p>
                }
                @if (msgSuccess) {
                    <p class="alert alert-success alert-w my-2 mx-auto"> Thanks for signing up</p>
                }
                <button [disabled]="registerForm.invalid ||isLoading" class=" btn-main my-2 mx-auto d-block w-50  fs-6 fw-bold">
                    @if (isLoading) {
                        <span><i class="fas fa-spin fa-spinner"></i></span>
                    }
                    Sign Up
                </button>
    
            </form>

        </div>
        


    </div>
</section>